<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>2026 Linear Entry Reduction</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
:root{
  --bg:#020617; --card:#0f172a; --muted:#94a3b8;
  --text:#e5e7eb; --accent:#38bdf8;
  --good:#22c55e; --bad:#ef4444;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,Segoe UI,Roboto,sans-serif;
  background:var(--bg);
  color:var(--text);
}
header{
  padding:20px;
  border-bottom:1px solid #1f2937;
}
.container{
  max-width:1200px;
  margin:auto;
  padding:20px;
}
.month{
  background:var(--card);
  border-radius:12px;
  padding:16px;
  margin-bottom:20px;
  border:1px solid #1f2937;
}
.month-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.week{
  margin-top:12px;
  padding:10px;
  border-radius:10px;
  border:1px dashed #1f2937;
}
.week-title{
  font-size:13px;
  color:var(--accent);
  margin-bottom:6px;
}
.days{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:6px;
}
.day{
  padding:8px;
  border-radius:8px;
  text-align:center;
  border:1px solid #1f2937;
  font-size:12px;
}
.used{
  background:#052e16;
  border-color:var(--good);
}
.sat{color:var(--bad)}
footer{
  text-align:center;
  color:var(--muted);
  font-size:12px;
  padding:20px;
}
</style>
</head>

<body>
<header>
  <h3>ðŸ“… Linear Entry Reduction Plan (2026)</h3>
  <small>Single rule â€¢ Increasing gap â€¢ No forcing</small>
</header>

<div class="container" id="app"></div>

<footer>
  Pure linear logic â€¢ Gap-driven reduction
</footer>

<script>
/* ================= CONFIG ================= */

const YEAR = 2026;

/*
 Minimum gap function (ONLY control)
 Slowly increases over the year
*/
function minGapDays(date) {
  const month = date.getMonth(); // 0-based
  if (month < 3) return 3;   // Janâ€“Mar
  if (month < 6) return 4;   // Aprâ€“Jun
  if (month < 9) return 5;   // Julâ€“Sep
  return 6;                  // Octâ€“Dec
}

const app = document.getElementById("app");

/* ================= HELPERS ================= */

function daysBetween(a, b) {
  return Math.floor((b - a) / (1000 * 60 * 60 * 24));
}

/* ================= BUILD CALENDAR ================= */

const calendar = [];
let cursor = new Date(YEAR, 0, 1);
while (cursor.getFullYear() === YEAR) {
  calendar.push(new Date(cursor));
  cursor.setDate(cursor.getDate() + 1);
}

/* ================= ASSIGN ENTRIES ================= */

const usedSet = new Set();
let lastUsed = null;

calendar.forEach(date => {
  const gap = minGapDays(date);

  if (!lastUsed || daysBetween(lastUsed, date) >= gap) {
    usedSet.add(date.toDateString());
    lastUsed = date;
  }
});

/* ================= RENDER (weeks only UI) ================= */

let render = new Date(YEAR, 0, 1);

while (render.getFullYear() === YEAR) {

  const monthIndex = render.getMonth();
  const monthName = render.toLocaleString("en-GB", { month: "long" });

  const monthBox = document.createElement("div");
  monthBox.className = "month";
  monthBox.innerHTML = `
    <div class="month-head">
      <strong>${monthName}</strong>
      <span class="badge">Gap rule active</span>
    </div>
  `;

  while (render.getMonth() === monthIndex) {

    const week = document.createElement("div");
    week.className = "week";
    week.innerHTML = `<div class="week-title">Week</div>`;

    const grid = document.createElement("div");
    grid.className = "days";

    for (let i = 0; i < 7; i++) {
      const cell = document.createElement("div");
      cell.className = "day";

      if (render.getMonth() === monthIndex) {
        if (usedSet.has(render.toDateString())) {
          cell.classList.add("used");
        }
        if (render.getDay() === 6) cell.classList.add("sat");

        cell.textContent = render.toLocaleDateString("en-GB", {
          weekday: "short",
          day: "2-digit",
          month: "short"
        });

        render.setDate(render.getDate() + 1);
      }

      grid.appendChild(cell);
    }

    week.appendChild(grid);
    monthBox.appendChild(week);
  }

  app.appendChild(monthBox);
}
</script>
</body>
</html>
